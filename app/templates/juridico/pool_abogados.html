{% extends "base.html" %}

{% block content %}
<div class="container mx-auto p-6">
    <div class="flex justify-between items-center mb-6">
        <h1 class="text-3xl font-bold">‚öñÔ∏è Pool de Abogados</h1>
    </div>
    
    <!-- Filtros -->
    <div class="bg-white p-4 rounded shadow mb-6">
        <form method="GET" class="flex gap-4">
            <input type="text" name="especialidad" placeholder="Filtrar por especialidad..." 
                   class="flex-1 px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500"
                   value="{{ request.args.get('especialidad', '') }}">
            <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
                Filtrar
            </button>
        </form>
    </div>
    
    <!-- Grid de Abogados -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6">
        {% for abogado in abogados.items %}
        <div class="bg-white rounded-lg shadow hover:shadow-lg transition p-6">
            <!-- Encabezado -->
            <div class="flex justify-between items-start mb-4">
                <div>
                    <h3 class="text-xl font-bold">{{ abogado.usuario.nombre_completo }}</h3>
                    <p class="text-sm text-gray-600">üìç {{ abogado.ciudad or 'Sin ubicaci√≥n' }}</p>
                </div>
                <div class="text-right">
                    {% if abogado.estado_disponibilidad == 'Disponible' %}
                    <span class="px-2 py-1 rounded text-xs font-semibold bg-green-100 text-green-800">
                        ‚úì Disponible
                    </span>
                    {% else %}
                    <span class="px-2 py-1 rounded text-xs font-semibold bg-gray-100 text-gray-800">
                        {{ abogado.estado_disponibilidad }}
                    </span>
                    {% endif %}
                </div>
            </div>
            
            <!-- Informaci√≥n -->
            <div class="space-y-2 mb-4 text-sm">
                <div class="flex justify-between">
                    <span class="text-gray-600">Experiencia:</span>
                    <span class="font-semibold">{{ abogado.anos_experiencia or 'N/A' }} a√±os</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-600">Casos exitosos:</span>
                    <span class="font-semibold">{{ abogado.casos_exitosos }}</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-600">Calificaci√≥n:</span>
                    <span class="font-semibold">‚≠ê {{ abogado.calificacion_promedio|round(1) }}/5.0</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-600">Horas disponibles:</span>
                    <span class="font-semibold">{{ abogado.horas_disponibles }}/semana</span>
                </div>
            </div>
            
            <!-- Especialidades -->
            <div class="mb-4">
                <p class="text-xs text-gray-600 font-semibold mb-2">ESPECIALIDADES</p>
                <div class="flex flex-wrap gap-2">
                    {% if abogado.especialidades %}
                        {% for esp in abogado.especialidades %}
                        <span class="px-2 py-1 rounded text-xs bg-blue-100 text-blue-800">
                            {{ esp }}
                        </span>
                        {% endfor %}
                    {% else %}
                    <span class="text-xs text-gray-500">Sin especialidades registradas</span>
                    {% endif %}
                </div>
            </div>
            
            <!-- Contacto -->
            <div class="border-t pt-4 mb-4 text-sm">
                <p class="text-gray-600">
                    <strong>Email:</strong> <a href="mailto:{{ abogado.usuario.email }}" class="text-blue-600 hover:underline">
                        {{ abogado.usuario.email }}
                    </a>
                </p>
                {% if abogado.telefono %}
                <p class="text-gray-600 mt-2">
                    <strong>Tel√©fono:</strong> {{ abogado.telefono }}
                </p>
                {% endif %}
            </div>
            
            <!-- Botones -->
            <div class="flex gap-2">
                <a href="{{ url_for('juridico.perfil_abogado', abogado_id=abogado.id) }}" 
                   class="flex-1 bg-blue-600 text-white px-4 py-2 rounded text-center text-sm hover:bg-blue-700">
                    Ver Perfil
                </a>
                <a href="{{ url_for('juridico.configurar_horario_abogado', abogado_id=abogado.id) }}" 
                   class="flex-1 bg-gray-300 text-gray-800 px-4 py-2 rounded text-center text-sm hover:bg-gray-400">
                    Horario
                </a>
            </div>
        </div>
        {% else %}
        <div class="col-span-3 text-center py-12 bg-white rounded-lg shadow">
            <p class="text-gray-500 text-lg">No hay abogados disponibles</p>
        </div>
        {% endfor %}
    </div>
    
    <!-- Paginaci√≥n -->
    <div class="flex justify-center gap-2">
        {% if abogados.has_prev %}
        <a href="{{ url_for('juridico.listar_abogados', page=abogados.prev_num) }}"
           class="px-4 py-2 border rounded hover:bg-gray-100">‚Üê Anterior</a>
        {% endif %}
        
        <span class="px-4 py-2">P√°gina {{ abogados.page }} de {{ abogados.pages }}</span>
        
        {% if abogados.has_next %}
        <a href="{{ url_for('juridico.listar_abogados', page=abogados.next_num) }}"
           class="px-4 py-2 border rounded hover:bg-gray-100">Siguiente ‚Üí</a>
        {% endif %}
    </div>
</div>
{% endblock %}