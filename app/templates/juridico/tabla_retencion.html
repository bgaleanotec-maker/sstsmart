{% extends "base.html" %}

{% block content %}
<div class="container mx-auto p-6">
    <h1 class="text-3xl font-bold mb-6">üìã Tabla de Retenci√≥n Documental</h1>
    
    <div class="bg-yellow-50 border border-yellow-200 rounded p-4 mb-6">
        <p class="text-sm">
            <strong>‚ÑπÔ∏è Informaci√≥n:</strong> Esta tabla define cu√°nto tiempo se conservan los documentos 
            seg√∫n el Decreto 1072/2015 Art 2.2.3.1. Los documentos se destruyen autom√°ticamente al vencer.
        </p>
    </div>
    
    <!-- Tabla de Retenci√≥n -->
    <div class="bg-white rounded shadow overflow-hidden">
        <table class="w-full">
            <thead class="bg-gray-100 border-b">
                <tr>
                    <th class="px-6 py-3 text-left text-sm font-semibold">C√≥digo</th>
                    <th class="px-6 py-3 text-left text-sm font-semibold">Tipo de Documento</th>
                    <th class="px-6 py-3 text-left text-sm font-semibold">Descripci√≥n</th>
                    <th class="px-6 py-3 text-left text-sm font-semibold">Retenci√≥n</th>
                    <th class="px-6 py-3 text-left text-sm font-semibold">Disposici√≥n Final</th>
                    <th class="px-6 py-3 text-left text-sm font-semibold">Normativa</th>
                </tr>
            </thead>
            <tbody>
                {% for tabla in tablas %}
                <tr class="border-b hover:bg-gray-50">
                    <td class="px-6 py-3 text-sm font-mono font-bold">
                        {{ tabla.codigo }}
                    </td>
                    <td class="px-6 py-3 text-sm font-semibold">
                        {{ tabla.tipo_documento }}
                    </td>
                    <td class="px-6 py-3 text-sm">
                        {{ tabla.descripcion or '-' }}
                    </td>
                    <td class="px-6 py-3 text-sm">
                        <span class="px-3 py-1 rounded bg-blue-100 text-blue-800 font-semibold">
                            {{ tabla.tiempo_retencion_anos }} a√±os
                        </span>
                    </td>
                    <td class="px-6 py-3 text-sm">
                        {% if tabla.disposicion_final == 'Destrucci√≥n' %}
                        <span class="px-3 py-1 rounded bg-red-100 text-red-800 text-xs font-semibold">
                            üóëÔ∏è Destrucci√≥n
                        </span>
                        {% else %}
                        <span class="px-3 py-1 rounded bg-green-100 text-green-800 text-xs font-semibold">
                            üìö Conservaci√≥n Permanente
                        </span>
                        {% endif %}
                    </td>
                    <td class="px-6 py-3 text-sm">
                        {% if tabla.normativa_aplicable %}
                        <details class="cursor-pointer">
                            <summary class="text-blue-600 hover:underline">Ver</summary>
                            <div class="mt-2 p-2 bg-gray-100 rounded text-xs">
                                {% for norma in tabla.normativa_aplicable %}
                                <p>‚Ä¢ {{ norma }}</p>
                                {% endfor %}
                            </div>
                        </details>
                        {% else %}
                        -
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    
    <!-- Leyenda -->
    <div class="grid grid-cols-2 gap-6 mt-8">
        <div class="bg-blue-50 p-6 rounded">
            <h3 class="font-bold mb-3">üìö Conservaci√≥n Permanente</h3>
            <p class="text-sm text-gray-700">
                Documentos que se conservan indefinidamente por su importancia hist√≥rica, 
                legal o estrat√©gica para la organizaci√≥n.
            </p>
        </div>
        
        <div class="bg-red-50 p-6 rounded">
            <h3 class="font-bold mb-3">üóëÔ∏è Destrucci√≥n Programada</h3>
            <p class="text-sm text-gray-700">
                Documentos que se destruyen autom√°ticamente despu√©s del per√≠odo de retenci√≥n 
                especificado. La destrucci√≥n se registra en auditor√≠a.
            </p>
        </div>
    </div>
    
    <!-- Informaci√≥n Adicional -->
    <div class="bg-white rounded shadow p-6 mt-6">
        <h2 class="text-xl font-bold mb-4">‚ÑπÔ∏è Informaci√≥n Importante</h2>
        <ul class="space-y-2 text-sm text-gray-700">
            <li>‚úì Los documentos se clasifican autom√°ticamente seg√∫n su tipo</li>
            <li>‚úì La fecha de destrucci√≥n se calcula autom√°ticamente al crear el documento</li>
            <li>‚úì Antes de destruir, se env√≠a notificaci√≥n al Responsable de Confiabilidad</li>
            <li>‚úì Toda destrucci√≥n queda registrada en auditor√≠a</li>
            <li>‚úì Los plazos cumplen con normativa SST Colombia 2025</li>
        </ul>
    </div>
</div>
{% endblock %}