{% extends "base.html" %}

{% block content %}
<div class="container mx-auto p-6 max-w-2xl">
    <div class="mb-6">
        <a href="{{ url_for('juridico.listar_consultas') }}" class="text-blue-600 hover:underline">
            &larr; Volver a consultas
        </a>
    </div>
    
    <div class="bg-white rounded-lg shadow p-8">
        <h1 class="text-3xl font-bold mb-6">⚖️ Nueva Consulta Jurídica</h1>
        
        <form method="POST" class="space-y-6">
            <!-- Título -->
            <div>
                <label class="block text-sm font-semibold mb-2">Título *</label>
                <input type="text" name="titulo" required 
                       class="w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500"
                       placeholder="Ej: Accidente laboral en área de producción">
            </div>
            
            <!-- Descripción -->
            <div>
                <label class="block text-sm font-semibold mb-2">Descripción *</label>
                <textarea name="descripcion" required rows="4"
                          class="w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500"
                          placeholder="Describe los detalles de la consulta..."></textarea>
            </div>
            
            <!-- Tipo de Consulta -->
            <div>
                <label class="block text-sm font-semibold mb-2">Tipo de Consulta *</label>
                <select name="tipo_consulta" required
                        class="w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <option value="">-- Selecciona tipo --</option>
                    <option value="Laboral">Laboral</option>
                    <option value="Penal">Penal</option>
                    <option value="Civil">Civil</option>
                    <option value="Administrativo">Administrativo</option>
                </select>
            </div>
            
            <!-- Grid de opciones -->
            <div class="grid grid-cols-2 gap-6">
                <!-- Prioridad -->
                <div>
                    <label class="block text-sm font-semibold mb-2">Prioridad</label>
                    <select name="prioridad"
                            class="w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="Baja">Baja</option>
                        <option value="Normal" selected>Normal</option>
                        <option value="Alta">Alta</option>
                        <option value="Crítica">Crítica</option>
                    </select>
                </div>
                
                <!-- Riesgo Legal -->
                <div>
                    <label class="block text-sm font-semibold mb-2">Riesgo Legal</label>
                    <select name="riesgo_legal"
                            class="w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="Bajo">Bajo</option>
                        <option value="Medio" selected>Medio</option>
                        <option value="Alto">Alto</option>
                        <option value="Crítico">Crítico</option>
                    </select>
                </div>
            </div>
            
            <!-- Confidencialidad -->
            <div>
                <label class="block text-sm font-semibold mb-2">Nivel de Confidencialidad</label>
                <select name="confidencialidad"
                        class="w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <option value="Público">Público</option>
                    <option value="Interno" selected>Interno</option>
                    <option value="Confidencial">Confidencial</option>
                    <option value="Restringido">Restringido (Datos médicos/sensibles)</option>
                </select>
            </div>
            
            <!-- Horas Estimadas -->
            <div>
                <label class="block text-sm font-semibold mb-2">Horas Estimadas de Consulta</label>
                <input type="number" name="horas_estimadas" step="0.5" min="0"
                       class="w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500"
                       placeholder="Ej: 3">
            </div>
            
            <!-- Empleado Afectado (opcional) -->
            <div>
                <label class="block text-sm font-semibold mb-2">Empleado Afectado (opcional)</label>
                <select name="empleado_afectado_id"
                        class="w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <option value="">-- Sin empleado específico --</option>
                    {% for empleado in empleados %}
                    <option value="{{ empleado.id }}">{{ empleado.nombre }} - {{ empleado.area }}</option>
                    {% endfor %}
                </select>
            </div>
            
            <!-- Botones -->
            <div class="flex gap-4 pt-6">
                <button type="submit" class="flex-1 bg-blue-600 text-white px-6 py-3 rounded font-semibold hover:bg-blue-700">
                    ✓ Crear Consulta
                </button>
                <a href="{{ url_for('juridico.listar_consultas') }}" 
                   class="flex-1 bg-gray-300 text-gray-800 px-6 py-3 rounded font-semibold hover:bg-gray-400 text-center">
                    ✕ Cancelar
                </a>
            </div>
        </form>
    </div>
</div>
{% endblock %}